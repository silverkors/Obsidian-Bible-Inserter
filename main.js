"use strict";var wn=Object.create;var ze=Object.defineProperty;var gn=Object.getOwnPropertyDescriptor;var yn=Object.getOwnPropertyNames;var _n=Object.getPrototypeOf,kn=Object.prototype.hasOwnProperty;var En=(k,h)=>()=>(h||k((h={exports:{}}).exports,h),h.exports),Sn=(k,h)=>{for(var c in h)ze(k,c,{get:h[c],enumerable:!0})},br=(k,h,c,d)=>{if(h&&typeof h=="object"||typeof h=="function")for(let y of yn(h))!kn.call(k,y)&&y!==c&&ze(k,y,{get:()=>h[y],enumerable:!(d=gn(h,y))||d.enumerable});return k};var qn=(k,h,c)=>(c=k!=null?wn(_n(k)):{},br(h||!k||!k.__esModule?ze(c,"default",{value:k,enumerable:!0}):c,k)),An=k=>br(ze({},"__esModule",{value:!0}),k);var yr=En((Ge,be)=>{var We=void 0,Ke=function(k){return We||(We=new Promise(function(h,c){var d=typeof k<"u"?k:{},y=d.onAbort;d.onAbort=function(e){c(new Error(e)),y&&y(e)},d.postRun=d.postRun||[],d.postRun.push(function(){h(d)}),be=void 0;var s;s||=typeof d<"u"?d:{};var M=typeof window=="object",q=typeof WorkerGlobalScope<"u",$=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";s.onRuntimeInitialized=function(){function e(o,l){switch(typeof l){case"boolean":bn(o,l?1:0);break;case"number":mn(o,l);break;case"string":pn(o,l,-1,-1);break;case"object":if(l===null)cr(o);else if(l.length!=null){var p=Ve(l,Je);dn(o,p,l.length,-1),Ue(p)}else He(o,"Wrong API use : tried to return a value of an unknown type ("+l+").",-1);break;default:cr(o)}}function t(o,l){for(var p=[],w=0;w<o;w+=1){var g=re(l+4*w,"i32"),P=un(g);if(P===1||P===2)g=cn(g);else if(P===3)g=hn(g);else if(P===4){P=g,g=ln(P),P=fn(P);for(var X=new Uint8Array(g),K=0;K<g;K+=1)X[K]=B[P+K];g=X}else g=null;p.push(g)}return p}function r(o,l){this.Qa=o,this.db=l,this.Oa=1,this.lb=[]}function n(o,l){if(this.db=l,l=Me(o)+1,this.eb=Et(l),this.eb===null)throw Error("Unable to allocate memory for the SQL string");ne(o,A,this.eb,l),this.kb=this.eb,this.Za=this.pb=null}function i(o){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),o!=null){var l=this.filename,p="/",w=l;if(p&&(p=typeof p=="string"?p:ft(p),w=l?ut(p+"/"+l):p),l=Ft(!0,!0),w=Br(w,l),o){if(typeof o=="string"){p=Array(o.length);for(var g=0,P=o.length;g<P;++g)p[g]=o.charCodeAt(g);o=p}De(w,l|146),p=ye(w,577),rr(p,o,0,o.length,0),vt(p),De(w,l)}}this.handleError(v(this.filename,a)),this.db=re(a,"i32"),pr(this.db),this.fb={},this.Sa={}}var a=he(4),u=s.cwrap,v=u("sqlite3_open","number",["string","number"]),S=u("sqlite3_close_v2","number",["number"]),E=u("sqlite3_exec","number",["number","string","number","number","number"]),T=u("sqlite3_changes","number",["number"]),z=u("sqlite3_prepare_v2","number",["number","string","number","number","number"]),ar=u("sqlite3_sql","string",["number"]),Ur=u("sqlite3_normalized_sql","string",["number"]),ur=u("sqlite3_prepare_v2","number",["number","number","number","number","number"]),Hr=u("sqlite3_bind_text","number",["number","number","number","number","number"]),lr=u("sqlite3_bind_blob","number",["number","number","number","number","number"]),zr=u("sqlite3_bind_double","number",["number","number","number"]),Qr=u("sqlite3_bind_int","number",["number","number","number"]),Wr=u("sqlite3_bind_parameter_index","number",["number","string"]),Kr=u("sqlite3_step","number",["number"]),Gr=u("sqlite3_errmsg","string",["number"]),Xr=u("sqlite3_column_count","number",["number"]),Yr=u("sqlite3_data_count","number",["number"]),Zr=u("sqlite3_column_double","number",["number","number"]),hr=u("sqlite3_column_text","string",["number","number"]),en=u("sqlite3_column_blob","number",["number","number"]),tn=u("sqlite3_column_bytes","number",["number","number"]),rn=u("sqlite3_column_type","number",["number","number"]),nn=u("sqlite3_column_name","string",["number","number"]),sn=u("sqlite3_reset","number",["number"]),on=u("sqlite3_clear_bindings","number",["number"]),an=u("sqlite3_finalize","number",["number"]),fr=u("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),un=u("sqlite3_value_type","number",["number"]),ln=u("sqlite3_value_bytes","number",["number"]),hn=u("sqlite3_value_text","string",["number"]),fn=u("sqlite3_value_blob","number",["number"]),cn=u("sqlite3_value_double","number",["number"]),mn=u("sqlite3_result_double","",["number","number"]),cr=u("sqlite3_result_null","",["number"]),pn=u("sqlite3_result_text","",["number","string","number","number"]),dn=u("sqlite3_result_blob","",["number","number","number","number"]),bn=u("sqlite3_result_int","",["number","number"]),He=u("sqlite3_result_error","",["number","string","number"]),mr=u("sqlite3_aggregate_context","number",["number","number"]),pr=u("RegisterExtensionFunctions","number",["number"]),dr=u("sqlite3_update_hook","number",["number","number","number"]);r.prototype.bind=function(o){if(!this.Qa)throw"Statement closed";return this.reset(),Array.isArray(o)?this.Cb(o):o!=null&&typeof o=="object"?this.Db(o):!0},r.prototype.step=function(){if(!this.Qa)throw"Statement closed";this.Oa=1;var o=Kr(this.Qa);switch(o){case 100:return!0;case 101:return!1;default:throw this.db.handleError(o)}},r.prototype.wb=function(o){return o==null&&(o=this.Oa,this.Oa+=1),Zr(this.Qa,o)},r.prototype.Gb=function(o){if(o==null&&(o=this.Oa,this.Oa+=1),o=hr(this.Qa,o),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(o)},r.prototype.Hb=function(o){return o==null&&(o=this.Oa,this.Oa+=1),hr(this.Qa,o)},r.prototype.getBlob=function(o){o==null&&(o=this.Oa,this.Oa+=1);var l=tn(this.Qa,o);o=en(this.Qa,o);for(var p=new Uint8Array(l),w=0;w<l;w+=1)p[w]=B[o+w];return p},r.prototype.get=function(o,l){l=l||{},o!=null&&this.bind(o)&&this.step(),o=[];for(var p=Yr(this.Qa),w=0;w<p;w+=1)switch(rn(this.Qa,w)){case 1:var g=l.useBigInt?this.Gb(w):this.wb(w);o.push(g);break;case 2:o.push(this.wb(w));break;case 3:o.push(this.Hb(w));break;case 4:o.push(this.getBlob(w));break;default:o.push(null)}return o},r.prototype.getColumnNames=function(){for(var o=[],l=Xr(this.Qa),p=0;p<l;p+=1)o.push(nn(this.Qa,p));return o},r.prototype.getAsObject=function(o,l){o=this.get(o,l),l=this.getColumnNames();for(var p={},w=0;w<l.length;w+=1)p[l[w]]=o[w];return p},r.prototype.getSQL=function(){return ar(this.Qa)},r.prototype.getNormalizedSQL=function(){return Ur(this.Qa)},r.prototype.run=function(o){return o!=null&&this.bind(o),this.step(),this.reset()},r.prototype.sb=function(o,l){l==null&&(l=this.Oa,this.Oa+=1),o=Ot(o);var p=Ve(o,Je);this.lb.push(p),this.db.handleError(Hr(this.Qa,l,p,o.length-1,0))},r.prototype.Bb=function(o,l){l==null&&(l=this.Oa,this.Oa+=1);var p=Ve(o,Je);this.lb.push(p),this.db.handleError(lr(this.Qa,l,p,o.length,0))},r.prototype.rb=function(o,l){l==null&&(l=this.Oa,this.Oa+=1),this.db.handleError((o===(o|0)?Qr:zr)(this.Qa,l,o))},r.prototype.Eb=function(o){o==null&&(o=this.Oa,this.Oa+=1),lr(this.Qa,o,0,0,0)},r.prototype.tb=function(o,l){switch(l==null&&(l=this.Oa,this.Oa+=1),typeof o){case"string":this.sb(o,l);return;case"number":this.rb(o,l);return;case"bigint":this.sb(o.toString(),l);return;case"boolean":this.rb(o+0,l);return;case"object":if(o===null){this.Eb(l);return}if(o.length!=null){this.Bb(o,l);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+o+")."},r.prototype.Db=function(o){var l=this;return Object.keys(o).forEach(function(p){var w=Wr(l.Qa,p);w!==0&&l.tb(o[p],w)}),!0},r.prototype.Cb=function(o){for(var l=0;l<o.length;l+=1)this.tb(o[l],l+1);return!0},r.prototype.reset=function(){return this.freemem(),on(this.Qa)===0&&sn(this.Qa)===0},r.prototype.freemem=function(){for(var o;(o=this.lb.pop())!==void 0;)Ue(o)},r.prototype.free=function(){this.freemem();var o=an(this.Qa)===0;return delete this.db.fb[this.Qa],this.Qa=0,o},n.prototype.next=function(){if(this.eb===null)return{done:!0};if(this.Za!==null&&(this.Za.free(),this.Za=null),!this.db.db)throw this.mb(),Error("Database closed");var o=je(),l=he(4);Ae(a),Ae(l);try{this.db.handleError(ur(this.db.db,this.kb,-1,a,l)),this.kb=re(l,"i32");var p=re(a,"i32");return p===0?(this.mb(),{done:!0}):(this.Za=new r(p,this.db),this.db.fb[p]=this.Za,{value:this.Za,done:!1})}catch(w){throw this.pb=at(this.kb),this.mb(),w}finally{Re(o)}},n.prototype.mb=function(){Ue(this.eb),this.eb=null},n.prototype.getRemainingSQL=function(){return this.pb!==null?this.pb:at(this.kb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(n.prototype[Symbol.iterator]=function(){return this}),i.prototype.run=function(o,l){if(!this.db)throw"Database closed";if(l){o=this.prepare(o,l);try{o.step()}finally{o.free()}}else this.handleError(E(this.db,o,0,0,a));return this},i.prototype.exec=function(o,l,p){if(!this.db)throw"Database closed";var w=je(),g=null;try{var P=_t(o),X=he(4);for(o=[];re(P,"i8")!==0;){Ae(a),Ae(X),this.handleError(ur(this.db,P,-1,a,X));var K=re(a,"i32");if(P=re(X,"i32"),K!==0){var Q=null;for(g=new r(K,this),l!=null&&g.bind(l);g.step();)Q===null&&(Q={columns:g.getColumnNames(),values:[]},o.push(Q)),Q.values.push(g.get(null,p));g.free()}}return o}catch(Y){throw g&&g.free(),Y}finally{Re(w)}},i.prototype.each=function(o,l,p,w,g){typeof l=="function"&&(w=p,p=l,l=void 0),o=this.prepare(o,l);try{for(;o.step();)p(o.getAsObject(null,g))}finally{o.free()}if(typeof w=="function")return w()},i.prototype.prepare=function(o,l){if(Ae(a),this.handleError(z(this.db,o,-1,a,0)),o=re(a,"i32"),o===0)throw"Nothing to prepare";var p=new r(o,this);return l!=null&&p.bind(l),this.fb[o]=p},i.prototype.iterateStatements=function(o){return new n(o,this)},i.prototype.export=function(){Object.values(this.fb).forEach(function(l){l.free()}),Object.values(this.Sa).forEach(le),this.Sa={},this.handleError(S(this.db));var o=Dr(this.filename);return this.handleError(v(this.filename,a)),this.db=re(a,"i32"),pr(this.db),o},i.prototype.close=function(){this.db!==null&&(Object.values(this.fb).forEach(function(o){o.free()}),Object.values(this.Sa).forEach(le),this.Sa={},this.Ya&&(le(this.Ya),this.Ya=void 0),this.handleError(S(this.db)),Xt("/"+this.filename),this.db=null)},i.prototype.handleError=function(o){if(o===0)return null;throw o=Gr(this.db),Error(o)},i.prototype.getRowsModified=function(){return T(this.db)},i.prototype.create_function=function(o,l){Object.prototype.hasOwnProperty.call(this.Sa,o)&&(le(this.Sa[o]),delete this.Sa[o]);var p=Ne(function(w,g,P){g=t(g,P);try{var X=l.apply(null,g)}catch(K){He(w,K,-1);return}e(w,X)},"viii");return this.Sa[o]=p,this.handleError(fr(this.db,o,l.length,1,0,p,0,0,0)),this},i.prototype.create_aggregate=function(o,l){var p=l.init||function(){return null},w=l.finalize||function(Q){return Q},g=l.step;if(!g)throw"An aggregate function must have a step function in "+o;var P={};Object.hasOwnProperty.call(this.Sa,o)&&(le(this.Sa[o]),delete this.Sa[o]),l=o+"__finalize",Object.hasOwnProperty.call(this.Sa,l)&&(le(this.Sa[l]),delete this.Sa[l]);var X=Ne(function(Q,Y,qt){var de=mr(Q,1);Object.hasOwnProperty.call(P,de)||(P[de]=p()),Y=t(Y,qt),Y=[P[de]].concat(Y);try{P[de]=g.apply(null,Y)}catch(vn){delete P[de],He(Q,vn,-1)}},"viii"),K=Ne(function(Q){var Y=mr(Q,1);try{var qt=w(P[Y])}catch(de){delete P[Y],He(Q,de,-1);return}e(Q,qt),delete P[Y]},"vi");return this.Sa[o]=X,this.Sa[l]=K,this.handleError(fr(this.db,o,g.length-1,1,0,0,X,K,0)),this},i.prototype.updateHook=function(o){this.Ya&&(dr(this.db,0,0),le(this.Ya),this.Ya=void 0),o&&(this.Ya=Ne(function(l,p,w,g,P){switch(p){case 18:l="insert";break;case 23:l="update";break;case 9:l="delete";break;default:throw"unknown operationCode in updateHook callback: "+p}if(w=w?R(A,w):"",g=g?R(A,g):"",P>Number.MAX_SAFE_INTEGER)throw"rowId too big to fit inside a Number";o(l,w,g,Number(P))},"viiiij"),dr(this.db,this.Ya,0))},s.Database=i};var j={...s},D="./this.program",F=(e,t)=>{throw t},I="",J,V;if($){var se=require("fs");require("path"),I=__dirname+"/",V=e=>(e=Te(e)?new URL(e):e,se.readFileSync(e)),J=async e=>(e=Te(e)?new URL(e):e,se.readFileSync(e,void 0)),!s.thisProgram&&1<process.argv.length&&(D=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),typeof be<"u"&&(be.exports=s),F=(e,t)=>{throw process.exitCode=e,t}}else(M||q)&&(q?I=self.location.href:typeof document<"u"&&document.currentScript&&(I=document.currentScript.src),I=I.startsWith("blob:")?"":I.slice(0,I.replace(/[?#].*/,"").lastIndexOf("/")+1),q&&(V=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),J=async e=>{if(Te(e))return new Promise((r,n)=>{var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=()=>{i.status==200||i.status==0&&i.response?r(i.response):n(i.status)},i.onerror=n,i.send(null)});var t=await fetch(e,{credentials:"same-origin"});if(t.ok)return t.arrayBuffer();throw Error(t.status+" : "+t.url)});var ke=s.print||console.log.bind(console),oe=s.printErr||console.error.bind(console);Object.assign(s,j),j=null,s.thisProgram&&(D=s.thisProgram);var O=s.wasmBinary,C,Z=!1,Ee,B,A,Se,x,L,rt,G,nt,Te=e=>e.startsWith("file://");function Pt(){var e=C.buffer;s.HEAP8=B=new Int8Array(e),s.HEAP16=Se=new Int16Array(e),s.HEAPU8=A=new Uint8Array(e),s.HEAPU16=new Uint16Array(e),s.HEAP32=x=new Int32Array(e),s.HEAPU32=L=new Uint32Array(e),s.HEAPF32=rt=new Float32Array(e),s.HEAPF64=nt=new Float64Array(e),s.HEAP64=G=new BigInt64Array(e),s.HEAPU64=new BigUint64Array(e)}var fe=0,qe=null;function ve(e){throw s.onAbort?.(e),e="Aborted("+e+")",oe(e),Z=!0,new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info.")}var it;async function Er(e){if(!O)try{var t=await J(e);return new Uint8Array(t)}catch{}if(e==it&&O)e=new Uint8Array(O);else if(V)e=V(e);else throw"both async and sync fetching of the wasm failed";return e}async function Sr(e,t){try{var r=await Er(e);return await WebAssembly.instantiate(r,t)}catch(n){oe(`failed to asynchronously prepare wasm: ${n}`),ve(n)}}async function qr(e){var t=it;if(!O&&typeof WebAssembly.instantiateStreaming=="function"&&!Te(t)&&!$)try{var r=fetch(t,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(r,e)}catch(n){oe(`wasm streaming compile failed: ${n}`),oe("falling back to ArrayBuffer instantiation")}return Sr(t,e)}class st{name="ExitStatus";constructor(t){this.message=`Program terminated with exit(${t})`,this.status=t}}var xt=e=>{for(;0<e.length;)e.shift()(s)},Nt=[],Rt=[],Ar=()=>{var e=s.preRun.shift();Rt.unshift(e)};function re(e,t="i8"){switch(t.endsWith("*")&&(t="*"),t){case"i1":return B[e];case"i8":return B[e];case"i16":return Se[e>>1];case"i32":return x[e>>2];case"i64":return G[e>>3];case"float":return rt[e>>2];case"double":return nt[e>>3];case"*":return L[e>>2];default:ve(`invalid type for getValue: ${t}`)}}var ot=s.noExitRuntime||!0;function Ae(e){var t="i32";switch(t.endsWith("*")&&(t="*"),t){case"i1":B[e]=0;break;case"i8":B[e]=0;break;case"i16":Se[e>>1]=0;break;case"i32":x[e>>2]=0;break;case"i64":G[e>>3]=BigInt(0);break;case"float":rt[e>>2]=0;break;case"double":nt[e>>3]=0;break;case"*":L[e>>2]=0;break;default:ve(`invalid type for setValue: ${t}`)}}var jt=typeof TextDecoder<"u"?new TextDecoder:void 0,R=(e,t=0,r=NaN)=>{var n=t+r;for(r=t;e[r]&&!(r>=n);)++r;if(16<r-t&&e.buffer&&jt)return jt.decode(e.subarray(t,r));for(n="";t<r;){var i=e[t++];if(i&128){var a=e[t++]&63;if((i&224)==192)n+=String.fromCharCode((i&31)<<6|a);else{var u=e[t++]&63;i=(i&240)==224?(i&15)<<12|a<<6|u:(i&7)<<18|a<<12|u<<6|e[t++]&63,65536>i?n+=String.fromCharCode(i):(i-=65536,n+=String.fromCharCode(55296|i>>10,56320|i&1023))}}else n+=String.fromCharCode(i)}return n},at=(e,t)=>e?R(A,e,t):"",Tt=(e,t)=>{for(var r=0,n=e.length-1;0<=n;n--){var i=e[n];i==="."?e.splice(n,1):i===".."?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r;r--)e.unshift("..");return e},ut=e=>{var t=e.charAt(0)==="/",r=e.slice(-1)==="/";return(e=Tt(e.split("/").filter(n=>!!n),!t).join("/"))||t||(e="."),e&&r&&(e+="/"),(t?"/":"")+e},Lt=e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1);return e=t[0],t=t[1],!e&&!t?".":(t&&=t.slice(0,-1),e+t)},Le=e=>e&&e.match(/([^\/]+|\/)\/*$/)[1],Mr=()=>{if($){var e=require("crypto");return t=>e.randomFillSync(t)}return t=>crypto.getRandomValues(t)},It=e=>{(It=Mr())(e)},Pr=(...e)=>{for(var t="",r=!1,n=e.length-1;-1<=n&&!r;n--){if(r=0<=n?e[n]:"/",typeof r!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!r)return"";t=r+"/"+t,r=r.charAt(0)==="/"}return t=Tt(t.split("/").filter(i=>!!i),!r).join("/"),(r?"/":"")+t||"."},lt=[],Me=e=>{for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);127>=n?t++:2047>=n?t+=2:55296<=n&&57343>=n?(t+=4,++r):t+=3}return t},ne=(e,t,r,n)=>{if(!(0<n))return 0;var i=r;n=r+n-1;for(var a=0;a<e.length;++a){var u=e.charCodeAt(a);if(55296<=u&&57343>=u){var v=e.charCodeAt(++a);u=65536+((u&1023)<<10)|v&1023}if(127>=u){if(r>=n)break;t[r++]=u}else{if(2047>=u){if(r+1>=n)break;t[r++]=192|u>>6}else{if(65535>=u){if(r+2>=n)break;t[r++]=224|u>>12}else{if(r+3>=n)break;t[r++]=240|u>>18,t[r++]=128|u>>12&63}t[r++]=128|u>>6&63}t[r++]=128|u&63}}return t[r]=0,r-i},Ot=(e,t)=>{var r=Array(Me(e)+1);return e=ne(e,r,0,r.length),t&&(r.length=e),r},Bt=[];function Dt(e,t){Bt[e]={input:[],output:[],cb:t},dt(e,xr)}var xr={open(e){var t=Bt[e.node.rdev];if(!t)throw new f(43);e.tty=t,e.seekable=!1},close(e){e.tty.cb.fsync(e.tty)},fsync(e){e.tty.cb.fsync(e.tty)},read(e,t,r,n){if(!e.tty||!e.tty.cb.xb)throw new f(60);for(var i=0,a=0;a<n;a++){try{var u=e.tty.cb.xb(e.tty)}catch{throw new f(29)}if(u===void 0&&i===0)throw new f(6);if(u==null)break;i++,t[r+a]=u}return i&&(e.node.atime=Date.now()),i},write(e,t,r,n){if(!e.tty||!e.tty.cb.qb)throw new f(60);try{for(var i=0;i<n;i++)e.tty.cb.qb(e.tty,t[r+i])}catch{throw new f(29)}return n&&(e.node.mtime=e.node.ctime=Date.now()),i}},Nr={xb(){e:{if(!lt.length){var e=null;if($){var t=Buffer.alloc(256),r=0,n=process.stdin.fd;try{r=se.readSync(n,t,0,256)}catch(i){if(i.toString().includes("EOF"))r=0;else throw i}0<r&&(e=t.slice(0,r).toString("utf-8"))}else typeof window<"u"&&typeof window.prompt=="function"&&(e=window.prompt("Input: "),e!==null&&(e+=`
`));if(!e){e=null;break e}lt=Ot(e,!0)}e=lt.shift()}return e},qb(e,t){t===null||t===10?(ke(R(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){0<e.output?.length&&(ke(R(e.output)),e.output=[])},Tb(){return{Ob:25856,Qb:5,Nb:191,Pb:35387,Mb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Ub(){return 0},Vb(){return[24,80]}},Rr={qb(e,t){t===null||t===10?(oe(R(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){0<e.output?.length&&(oe(R(e.output)),e.output=[])}},_={Wa:null,Xa(){return _.createNode(null,"/",16895,0)},createNode(e,t,r,n){if((r&61440)===24576||(r&61440)===4096)throw new f(63);return _.Wa||(_.Wa={dir:{node:{Ta:_.La.Ta,Ua:_.La.Ua,lookup:_.La.lookup,hb:_.La.hb,rename:_.La.rename,unlink:_.La.unlink,rmdir:_.La.rmdir,readdir:_.La.readdir,symlink:_.La.symlink},stream:{Va:_.Ma.Va}},file:{node:{Ta:_.La.Ta,Ua:_.La.Ua},stream:{Va:_.Ma.Va,read:_.Ma.read,write:_.Ma.write,ib:_.Ma.ib,jb:_.Ma.jb}},link:{node:{Ta:_.La.Ta,Ua:_.La.Ua,readlink:_.La.readlink},stream:{}},ub:{node:{Ta:_.La.Ta,Ua:_.La.Ua},stream:Or}}),r=Ut(e,t,r,n),H(r.mode)?(r.La=_.Wa.dir.node,r.Ma=_.Wa.dir.stream,r.Na={}):(r.mode&61440)===32768?(r.La=_.Wa.file.node,r.Ma=_.Wa.file.stream,r.Ra=0,r.Na=null):(r.mode&61440)===40960?(r.La=_.Wa.link.node,r.Ma=_.Wa.link.stream):(r.mode&61440)===8192&&(r.La=_.Wa.ub.node,r.Ma=_.Wa.ub.stream),r.atime=r.mtime=r.ctime=Date.now(),e&&(e.Na[t]=r,e.atime=e.mtime=e.ctime=r.atime),r},Sb(e){return e.Na?e.Na.subarray?e.Na.subarray(0,e.Ra):new Uint8Array(e.Na):new Uint8Array(0)},La:{Ta(e){var t={};return t.dev=(e.mode&61440)===8192?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,H(e.mode)?t.size=4096:(e.mode&61440)===32768?t.size=e.Ra:(e.mode&61440)===40960?t.size=e.link.length:t.size=0,t.atime=new Date(e.atime),t.mtime=new Date(e.mtime),t.ctime=new Date(e.ctime),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},Ua(e,t){for(var r of["mode","atime","mtime","ctime"])t[r]!=null&&(e[r]=t[r]);t.size!==void 0&&(t=t.size,e.Ra!=t&&(t==0?(e.Na=null,e.Ra=0):(r=e.Na,e.Na=new Uint8Array(t),r&&e.Na.set(r.subarray(0,Math.min(t,e.Ra))),e.Ra=t)))},lookup(){throw _.vb},hb(e,t,r,n){return _.createNode(e,t,r,n)},rename(e,t,r){try{var n=ce(t,r)}catch{}if(n){if(H(e.mode))for(var i in n.Na)throw new f(55);mt(n)}delete e.parent.Na[e.name],t.Na[r]=e,e.name=r,t.ctime=t.mtime=e.parent.ctime=e.parent.mtime=Date.now()},unlink(e,t){delete e.Na[t],e.ctime=e.mtime=Date.now()},rmdir(e,t){var r=ce(e,t),n;for(n in r.Na)throw new f(55);delete e.Na[t],e.ctime=e.mtime=Date.now()},readdir(e){return[".","..",...Object.keys(e.Na)]},symlink(e,t,r){return e=_.createNode(e,t,41471,0),e.link=r,e},readlink(e){if((e.mode&61440)!==40960)throw new f(28);return e.link}},Ma:{read(e,t,r,n,i){var a=e.node.Na;if(i>=e.node.Ra)return 0;if(e=Math.min(e.node.Ra-i,n),8<e&&a.subarray)t.set(a.subarray(i,i+e),r);else for(n=0;n<e;n++)t[r+n]=a[i+n];return e},write(e,t,r,n,i,a){if(t.buffer===B.buffer&&(a=!1),!n)return 0;if(e=e.node,e.mtime=e.ctime=Date.now(),t.subarray&&(!e.Na||e.Na.subarray)){if(a)return e.Na=t.subarray(r,r+n),e.Ra=n;if(e.Ra===0&&i===0)return e.Na=t.slice(r,r+n),e.Ra=n;if(i+n<=e.Ra)return e.Na.set(t.subarray(r,r+n),i),n}a=i+n;var u=e.Na?e.Na.length:0;if(u>=a||(a=Math.max(a,u*(1048576>u?2:1.125)>>>0),u!=0&&(a=Math.max(a,256)),u=e.Na,e.Na=new Uint8Array(a),0<e.Ra&&e.Na.set(u.subarray(0,e.Ra),0)),e.Na.subarray&&t.subarray)e.Na.set(t.subarray(r,r+n),i);else for(a=0;a<n;a++)e.Na[i+a]=t[r+a];return e.Ra=Math.max(e.Ra,i+n),n},Va(e,t,r){if(r===1?t+=e.position:r===2&&(e.node.mode&61440)===32768&&(t+=e.node.Ra),0>t)throw new f(28);return t},ib(e,t,r,n,i){if((e.node.mode&61440)!==32768)throw new f(43);if(e=e.node.Na,i&2||!e||e.buffer!==B.buffer){i=!0,n=65536*Math.ceil(t/65536);var a=sr(65536,n);if(a&&A.fill(0,a,a+n),n=a,!n)throw new f(48);e&&((0<r||r+t<e.length)&&(e.subarray?e=e.subarray(r,r+t):e=Array.prototype.slice.call(e,r,r+t)),B.set(e,n))}else i=!1,n=e.byteOffset;return{Kb:n,Ab:i}},jb(e,t,r,n){return _.Ma.write(e,t,0,n,r,!1),0}}},Ft=(e,t)=>{var r=0;return e&&(r|=365),t&&(r|=146),r},ht=null,$t={},we=[],jr=1,ae=null,Ct=!1,Jt=!0,Vt={},f=class{name="ErrnoError";constructor(e){this.Pa=e}},Tr=class{gb={};node=null;get flags(){return this.gb.flags}set flags(e){this.gb.flags=e}get position(){return this.gb.position}set position(e){this.gb.position=e}},Lr=class{La={};Ma={};ab=null;constructor(e,t,r,n){e||=this,this.parent=e,this.Xa=e.Xa,this.id=jr++,this.name=t,this.mode=r,this.rdev=n,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&365)===365}set read(e){e?this.mode|=365:this.mode&=-366}get write(){return(this.mode&146)===146}set write(e){e?this.mode|=146:this.mode&=-147}};function W(e,t={}){if(!e)throw new f(44);t.nb??(t.nb=!0),e.charAt(0)==="/"||(e="//"+e);var r=0;e:for(;40>r;r++){e=e.split("/").filter(v=>!!v);for(var n=ht,i="/",a=0;a<e.length;a++){var u=a===e.length-1;if(u&&t.parent)break;if(e[a]!==".")if(e[a]==="..")i=Lt(i),n=n.parent;else{i=ut(i+"/"+e[a]);try{n=ce(n,e[a])}catch(v){if(v?.Pa===44&&u&&t.Jb)return{path:i};throw v}if(!n.ab||u&&!t.nb||(n=n.ab.root),(n.mode&61440)===40960&&(!u||t.$a)){if(!n.La.readlink)throw new f(52);n=n.La.readlink(n),n.charAt(0)==="/"||(n=Lt(i)+"/"+n),e=n+"/"+e.slice(a+1).join("/");continue e}}}return{path:i,node:n}}throw new f(32)}function ft(e){for(var t;;){if(e===e.parent)return e=e.Xa.zb,t?e[e.length-1]!=="/"?`${e}/${t}`:e+t:e;t=t?`${e.name}/${t}`:e.name,e=e.parent}}function ct(e,t){for(var r=0,n=0;n<t.length;n++)r=(r<<5)-r+t.charCodeAt(n)|0;return(e+r>>>0)%ae.length}function mt(e){var t=ct(e.parent.id,e.name);if(ae[t]===e)ae[t]=e.bb;else for(t=ae[t];t;){if(t.bb===e){t.bb=e.bb;break}t=t.bb}}function ce(e,t){var r=H(e.mode)?(r=ge(e,"x"))?r:e.La.lookup?0:2:54;if(r)throw new f(r);for(r=ae[ct(e.id,t)];r;r=r.bb){var n=r.name;if(r.parent.id===e.id&&n===t)return r}return e.La.lookup(e,t)}function Ut(e,t,r,n){return e=new Lr(e,t,r,n),t=ct(e.parent.id,e.name),e.bb=ae[t],ae[t]=e}function H(e){return(e&61440)===16384}function Ht(e){var t=["r","w","rw"][e&3];return e&512&&(t+="w"),t}function ge(e,t){if(Jt)return 0;if(!t.includes("r")||e.mode&292){if(t.includes("w")&&!(e.mode&146)||t.includes("x")&&!(e.mode&73))return 2}else return 2;return 0}function zt(e,t){if(!H(e.mode))return 54;try{return ce(e,t),20}catch{}return ge(e,"wx")}function Qt(e,t,r){try{var n=ce(e,t)}catch(i){return i.Pa}if(e=ge(e,"wx"))return e;if(r){if(!H(n.mode))return 54;if(n===n.parent||ft(n)==="/")return 10}else if(H(n.mode))return 31;return 0}function Ie(e){if(!e)throw new f(63);return e}function U(e){if(e=we[e],!e)throw new f(8);return e}function Wt(e,t=-1){if(e=Object.assign(new Tr,e),t==-1)e:{for(t=0;4096>=t;t++)if(!we[t])break e;throw new f(33)}return e.fd=t,we[t]=e}function Ir(e,t=-1){return e=Wt(e,t),e.Ma?.Rb?.(e),e}function pt(e,t,r){var n=e?.Ma.Ua;e=n?e:t,n??=t.La.Ua,Ie(n),n(e,r)}var Or={open(e){e.Ma=$t[e.node.rdev].Ma,e.Ma.open?.(e)},Va(){throw new f(70)}};function dt(e,t){$t[e]={Ma:t}}function Kt(e,t){var r=t==="/";if(r&&ht)throw new f(10);if(!r&&t){var n=W(t,{nb:!1});if(t=n.path,n=n.node,n.ab)throw new f(10);if(!H(n.mode))throw new f(54)}t={type:e,Wb:{},zb:t,Ib:[]},e=e.Xa(t),e.Xa=t,t.root=e,r?ht=e:n&&(n.ab=t,n.Xa&&n.Xa.Ib.push(t))}function Oe(e,t,r){var n=W(e,{parent:!0}).node;if(e=Le(e),!e)throw new f(28);if(e==="."||e==="..")throw new f(20);var i=zt(n,e);if(i)throw new f(i);if(!n.La.hb)throw new f(63);return n.La.hb(n,e,t,r)}function Br(e,t=438){return Oe(e,t&4095|32768,0)}function ee(e,t=511){return Oe(e,t&1023|16384,0)}function Be(e,t,r){typeof r>"u"&&(r=t,t=438),Oe(e,t|8192,r)}function bt(e,t){if(!Pr(e))throw new f(44);var r=W(t,{parent:!0}).node;if(!r)throw new f(44);t=Le(t);var n=zt(r,t);if(n)throw new f(n);if(!r.La.symlink)throw new f(63);r.La.symlink(r,t,e)}function Gt(e){var t=W(e,{parent:!0}).node;e=Le(e);var r=ce(t,e),n=Qt(t,e,!0);if(n)throw new f(n);if(!t.La.rmdir)throw new f(63);if(r.ab)throw new f(10);t.La.rmdir(t,e),mt(r)}function Xt(e){var t=W(e,{parent:!0}).node;if(!t)throw new f(44);e=Le(e);var r=ce(t,e),n=Qt(t,e,!1);if(n)throw new f(n);if(!t.La.unlink)throw new f(63);if(r.ab)throw new f(10);t.La.unlink(t,e),mt(r)}function Pe(e,t){return e=W(e,{$a:!t}).node,Ie(e.La.Ta)(e)}function Yt(e,t,r,n){pt(e,t,{mode:r&4095|t.mode&-4096,ctime:Date.now(),Fb:n})}function De(e,t){e=typeof e=="string"?W(e,{$a:!0}).node:e,Yt(null,e,t)}function Zt(e,t,r){if(H(t.mode))throw new f(31);if((t.mode&61440)!==32768)throw new f(28);var n=ge(t,"w");if(n)throw new f(n);pt(e,t,{size:r,timestamp:Date.now()})}function ye(e,t,r=438){if(e==="")throw new f(44);if(typeof t=="string"){var n={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[t];if(typeof n>"u")throw Error(`Unknown file open mode: ${t}`);t=n}if(r=t&64?r&4095|32768:0,typeof e=="object")n=e;else{var i=e.endsWith("/");e=W(e,{$a:!(t&131072),Jb:!0}),n=e.node,e=e.path}var a=!1;if(t&64)if(n){if(t&128)throw new f(20)}else{if(i)throw new f(31);n=Oe(e,r|511,0),a=!0}if(!n)throw new f(44);if((n.mode&61440)===8192&&(t&=-513),t&65536&&!H(n.mode))throw new f(54);if(!a&&(i=n?(n.mode&61440)===40960?32:H(n.mode)&&(Ht(t)!=="r"||t&576)?31:ge(n,Ht(t)):44))throw new f(i);return t&512&&!a&&(i=n,i=typeof i=="string"?W(i,{$a:!0}).node:i,Zt(null,i,0)),t&=-131713,i=Wt({node:n,path:ft(n),flags:t,seekable:!0,position:0,Ma:n.Ma,Lb:[],error:!1}),i.Ma.open&&i.Ma.open(i),a&&De(n,r&511),!s.logReadFiles||t&1||e in Vt||(Vt[e]=1),i}function vt(e){if(e.fd===null)throw new f(8);e.ob&&(e.ob=null);try{e.Ma.close&&e.Ma.close(e)}catch(t){throw t}finally{we[e.fd]=null}e.fd=null}function er(e,t,r){if(e.fd===null)throw new f(8);if(!e.seekable||!e.Ma.Va)throw new f(70);if(r!=0&&r!=1&&r!=2)throw new f(28);e.position=e.Ma.Va(e,t,r),e.Lb=[]}function tr(e,t,r,n,i){if(0>n||0>i)throw new f(28);if(e.fd===null)throw new f(8);if((e.flags&2097155)===1)throw new f(8);if(H(e.node.mode))throw new f(31);if(!e.Ma.read)throw new f(28);var a=typeof i<"u";if(!a)i=e.position;else if(!e.seekable)throw new f(70);return t=e.Ma.read(e,t,r,n,i),a||(e.position+=t),t}function rr(e,t,r,n,i){if(0>n||0>i)throw new f(28);if(e.fd===null)throw new f(8);if(!(e.flags&2097155))throw new f(8);if(H(e.node.mode))throw new f(31);if(!e.Ma.write)throw new f(28);e.seekable&&e.flags&1024&&er(e,0,2);var a=typeof i<"u";if(!a)i=e.position;else if(!e.seekable)throw new f(70);return t=e.Ma.write(e,t,r,n,i,void 0),a||(e.position+=t),t}function Dr(e){var t="binary";if(t!=="utf8"&&t!=="binary")throw Error(`Invalid encoding type "${t}"`);var r,n=ye(e,n||0);e=Pe(e).size;var i=new Uint8Array(e);return tr(n,i,0,e,0),t==="utf8"?r=R(i):t==="binary"&&(r=i),vt(n),r}function ue(e,t,r){e=ut("/dev/"+e);var n=Ft(!!t,!!r);ue.yb??(ue.yb=64);var i=ue.yb++<<8|0;dt(i,{open(a){a.seekable=!1},close(){r?.buffer?.length&&r(10)},read(a,u,v,S){for(var E=0,T=0;T<S;T++){try{var z=t()}catch{throw new f(29)}if(z===void 0&&E===0)throw new f(6);if(z==null)break;E++,u[v+T]=z}return E&&(a.node.atime=Date.now()),E},write(a,u,v,S){for(var E=0;E<S;E++)try{r(u[v+E])}catch{throw new f(29)}return S&&(a.node.mtime=a.node.ctime=Date.now()),E}}),Be(e,n,i)}var N={};function me(e,t,r){if(t.charAt(0)==="/")return t;if(e=e===-100?"/":U(e).path,t.length==0){if(!r)throw new f(44);return e}return e+"/"+t}function Fe(e,t){x[e>>2]=t.dev,x[e+4>>2]=t.mode,L[e+8>>2]=t.nlink,x[e+12>>2]=t.uid,x[e+16>>2]=t.gid,x[e+20>>2]=t.rdev,G[e+24>>3]=BigInt(t.size),x[e+32>>2]=4096,x[e+36>>2]=t.blocks;var r=t.atime.getTime(),n=t.mtime.getTime(),i=t.ctime.getTime();return G[e+40>>3]=BigInt(Math.floor(r/1e3)),L[e+48>>2]=r%1e3*1e6,G[e+56>>3]=BigInt(Math.floor(n/1e3)),L[e+64>>2]=n%1e3*1e6,G[e+72>>3]=BigInt(Math.floor(i/1e3)),L[e+80>>2]=i%1e3*1e6,G[e+88>>3]=BigInt(t.ino),0}var $e=void 0,Ce=()=>{var e=x[+$e>>2];return $e+=4,e},wt=0,Fr=[0,31,60,91,121,152,182,213,244,274,305,335],$r=[0,31,59,90,120,151,181,212,243,273,304,334],xe={},nr=e=>{Ee=e,ot||0<wt||(s.onExit?.(e),Z=!0),F(e,new st(e))},Cr=e=>{if(!Z)try{if(e(),!(ot||0<wt))try{Ee=e=Ee,nr(e)}catch(t){t instanceof st||t=="unwind"||F(1,t)}}catch(t){t instanceof st||t=="unwind"||F(1,t)}},gt={},ir=()=>{if(!yt){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:D||"./this.program"},t;for(t in gt)gt[t]===void 0?delete e[t]:e[t]=gt[t];var r=[];for(t in e)r.push(`${t}=${e[t]}`);yt=r}return yt},yt,_t=e=>{var t=Me(e)+1,r=he(t);return ne(e,A,r,t),r},Jr=(e,t,r,n)=>{var i={string:E=>{var T=0;return E!=null&&E!==0&&(T=_t(E)),T},array:E=>{var T=he(E.length);return B.set(E,T),T}};e=s["_"+e];var a=[],u=0;if(n)for(var v=0;v<n.length;v++){var S=i[r[v]];S?(u===0&&(u=je()),a[v]=S(n[v])):a[v]=n[v]}return r=e(...a),r=function(E){return u!==0&&Re(u),t==="string"?E?R(A,E):"":t==="boolean"?!!E:E}(r)},Je=0,Ve=(e,t)=>(t=t==1?he(e.length):Et(e.length),e.subarray||e.slice||(e=new Uint8Array(e)),A.set(e,t),t),pe,kt=[],ie,le=e=>{pe.delete(ie.get(e)),ie.set(e,null),kt.push(e)},Ne=(e,t)=>{if(!pe){pe=new WeakMap;var r=ie.length;if(pe)for(var n=0;n<0+r;n++){var i=ie.get(n);i&&pe.set(i,n)}}if(r=pe.get(e)||0)return r;if(kt.length)r=kt.pop();else{try{ie.grow(1)}catch(S){throw S instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":S}r=ie.length-1}try{ie.set(r,e)}catch(S){if(!(S instanceof TypeError))throw S;if(typeof WebAssembly.Function=="function"){var a=WebAssembly.Function;n={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},i={parameters:[],results:t[0]=="v"?[]:[n[t[0]]]};for(var u=1;u<t.length;++u)i.parameters.push(n[t[u]]);t=new a(i,e)}else{n=[1],i=t.slice(0,1),t=t.slice(1),u={i:127,p:127,j:126,f:125,d:124,e:111},n.push(96);var v=t.length;128>v?n.push(v):n.push(v%128|128,v>>7);for(a of t)n.push(u[a]);i=="v"?n.push(0):n.push(1,u[i]),t=[0,97,115,109,1,0,0,0,1],a=n.length,128>a?t.push(a):t.push(a%128|128,a>>7),t.push(...n),t.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),t=new WebAssembly.Module(new Uint8Array(t)),t=new WebAssembly.Instance(t,{e:{f:e}}).exports.f}ie.set(r,t)}return pe.set(e,r),r};ae=Array(4096),Kt(_,"/"),ee("/tmp"),ee("/home"),ee("/home/web_user"),function(){ee("/dev"),dt(259,{read:()=>0,write:(n,i,a,u)=>u,Va:()=>0}),Be("/dev/null",259),Dt(1280,Nr),Dt(1536,Rr),Be("/dev/tty",1280),Be("/dev/tty1",1536);var e=new Uint8Array(1024),t=0,r=()=>(t===0&&(It(e),t=e.byteLength),e[--t]);ue("random",r),ue("urandom",r),ee("/dev/shm"),ee("/dev/shm/tmp")}(),function(){ee("/proc");var e=ee("/proc/self");ee("/proc/self/fd"),Kt({Xa(){var t=Ut(e,"fd",16895,73);return t.Ma={Va:_.Ma.Va},t.La={lookup(r,n){r=+n;var i=U(r);return r={parent:null,Xa:{zb:"fake"},La:{readlink:()=>i.path},id:r+1},r.parent=r},readdir(){return Array.from(we.entries()).filter(([,r])=>r).map(([r])=>r.toString())}},t}},"/proc/self/fd")}(),_.vb=new f(44),_.vb.stack="<generic error, no stack>";var Vr={a:(e,t,r,n)=>ve(`Assertion failed: ${e?R(A,e):""}, at: `+[t?t?R(A,t):"":"unknown filename",r,n?n?R(A,n):"":"unknown function"]),i:function(e,t){try{return e=e?R(A,e):"",De(e,t),0}catch(r){if(typeof N>"u"||r.name!=="ErrnoError")throw r;return-r.Pa}},L:function(e,t,r){try{if(t=t?R(A,t):"",t=me(e,t),r&-8)return-28;var n=W(t,{$a:!0}).node;return n?(e="",r&4&&(e+="r"),r&2&&(e+="w"),r&1&&(e+="x"),e&&ge(n,e)?-2:0):-44}catch(i){if(typeof N>"u"||i.name!=="ErrnoError")throw i;return-i.Pa}},j:function(e,t){try{var r=U(e);return Yt(r,r.node,t,!1),0}catch(n){if(typeof N>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},h:function(e){try{var t=U(e);return pt(t,t.node,{timestamp:Date.now(),Fb:!1}),0}catch(r){if(typeof N>"u"||r.name!=="ErrnoError")throw r;return-r.Pa}},b:function(e,t,r){$e=r;try{var n=U(e);switch(t){case 0:var i=Ce();if(0>i)break;for(;we[i];)i++;return Ir(n,i).fd;case 1:case 2:return 0;case 3:return n.flags;case 4:return i=Ce(),n.flags|=i,0;case 12:return i=Ce(),Se[i+0>>1]=2,0;case 13:case 14:return 0}return-28}catch(a){if(typeof N>"u"||a.name!=="ErrnoError")throw a;return-a.Pa}},g:function(e,t){try{var r=U(e),n=r.node,i=r.Ma.Ta;e=i?r:n,i??=n.La.Ta,Ie(i);var a=i(e);return Fe(t,a)}catch(u){if(typeof N>"u"||u.name!=="ErrnoError")throw u;return-u.Pa}},H:function(e,t){t=-9007199254740992>t||9007199254740992<t?NaN:Number(t);try{if(isNaN(t))return 61;var r=U(e);if(0>t||!(r.flags&2097155))throw new f(28);return Zt(r,r.node,t),0}catch(n){if(typeof N>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},G:function(e,t){try{if(t===0)return-28;var r=Me("/")+1;return t<r?-68:(ne("/",A,e,t),r)}catch(n){if(typeof N>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},K:function(e,t){try{return e=e?R(A,e):"",Fe(t,Pe(e,!0))}catch(r){if(typeof N>"u"||r.name!=="ErrnoError")throw r;return-r.Pa}},C:function(e,t,r){try{return t=t?R(A,t):"",t=me(e,t),ee(t,r),0}catch(n){if(typeof N>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},J:function(e,t,r,n){try{t=t?R(A,t):"";var i=n&256;return t=me(e,t,n&4096),Fe(r,i?Pe(t,!0):Pe(t))}catch(a){if(typeof N>"u"||a.name!=="ErrnoError")throw a;return-a.Pa}},x:function(e,t,r,n){$e=n;try{t=t?R(A,t):"",t=me(e,t);var i=n?Ce():0;return ye(t,r,i).fd}catch(a){if(typeof N>"u"||a.name!=="ErrnoError")throw a;return-a.Pa}},v:function(e,t,r,n){try{if(t=t?R(A,t):"",t=me(e,t),0>=n)return-28;var i=W(t).node;if(!i)throw new f(44);if(!i.La.readlink)throw new f(28);var a=i.La.readlink(i),u=Math.min(n,Me(a)),v=B[r+u];return ne(a,A,r,n+1),B[r+u]=v,u}catch(S){if(typeof N>"u"||S.name!=="ErrnoError")throw S;return-S.Pa}},u:function(e){try{return e=e?R(A,e):"",Gt(e),0}catch(t){if(typeof N>"u"||t.name!=="ErrnoError")throw t;return-t.Pa}},f:function(e,t){try{return e=e?R(A,e):"",Fe(t,Pe(e))}catch(r){if(typeof N>"u"||r.name!=="ErrnoError")throw r;return-r.Pa}},r:function(e,t,r){try{return t=t?R(A,t):"",t=me(e,t),r===0?Xt(t):r===512?Gt(t):ve("Invalid flags passed to unlinkat"),0}catch(n){if(typeof N>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},q:function(e,t,r){try{t=t?R(A,t):"",t=me(e,t,!0);var n=Date.now(),i,a;if(r){var u=L[r>>2]+4294967296*x[r+4>>2],v=x[r+8>>2];v==1073741823?i=n:v==1073741822?i=null:i=1e3*u+v/1e6,r+=16,u=L[r>>2]+4294967296*x[r+4>>2],v=x[r+8>>2],v==1073741823?a=n:v==1073741822?a=null:a=1e3*u+v/1e6}else a=i=n;if((a??i)!==null){e=i;var S=W(t,{$a:!0}).node;Ie(S.La.Ua)(S,{atime:e,mtime:a})}return 0}catch(E){if(typeof N>"u"||E.name!=="ErrnoError")throw E;return-E.Pa}},m:()=>ve(""),l:()=>{ot=!1,wt=0},A:function(e,t){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e),e=new Date(1e3*e),x[t>>2]=e.getSeconds(),x[t+4>>2]=e.getMinutes(),x[t+8>>2]=e.getHours(),x[t+12>>2]=e.getDate(),x[t+16>>2]=e.getMonth(),x[t+20>>2]=e.getFullYear()-1900,x[t+24>>2]=e.getDay();var r=e.getFullYear();x[t+28>>2]=(r%4!==0||r%100===0&&r%400!==0?$r:Fr)[e.getMonth()]+e.getDate()-1|0,x[t+36>>2]=-(60*e.getTimezoneOffset()),r=new Date(e.getFullYear(),6,1).getTimezoneOffset();var n=new Date(e.getFullYear(),0,1).getTimezoneOffset();x[t+32>>2]=(r!=n&&e.getTimezoneOffset()==Math.min(n,r))|0},y:function(e,t,r,n,i,a,u){i=-9007199254740992>i||9007199254740992<i?NaN:Number(i);try{if(isNaN(i))return 61;var v=U(n);if(t&2&&!(r&2)&&(v.flags&2097155)!==2)throw new f(2);if((v.flags&2097155)===1)throw new f(2);if(!v.Ma.ib)throw new f(43);if(!e)throw new f(28);var S=v.Ma.ib(v,e,i,t,r),E=S.Kb;return x[a>>2]=S.Ab,L[u>>2]=E,0}catch(T){if(typeof N>"u"||T.name!=="ErrnoError")throw T;return-T.Pa}},z:function(e,t,r,n,i,a){a=-9007199254740992>a||9007199254740992<a?NaN:Number(a);try{var u=U(i);if(r&2){if(r=a,(u.node.mode&61440)!==32768)throw new f(43);if(!(n&2)){var v=A.slice(e,e+t);u.Ma.jb&&u.Ma.jb(u,v,r,t,n)}}}catch(S){if(typeof N>"u"||S.name!=="ErrnoError")throw S;return-S.Pa}},n:(e,t)=>{if(xe[e]&&(clearTimeout(xe[e].id),delete xe[e]),!t)return 0;var r=setTimeout(()=>{delete xe[e],Cr(()=>or(e,performance.now()))},t);return xe[e]={id:r,Xb:t},0},B:(e,t,r,n)=>{var i=new Date().getFullYear(),a=new Date(i,0,1).getTimezoneOffset();i=new Date(i,6,1).getTimezoneOffset(),L[e>>2]=60*Math.max(a,i),x[t>>2]=+(a!=i),t=u=>{var v=Math.abs(u);return`UTC${0<=u?"-":"+"}${String(Math.floor(v/60)).padStart(2,"0")}${String(v%60).padStart(2,"0")}`},e=t(a),t=t(i),i<a?(ne(e,A,r,17),ne(t,A,n,17)):(ne(e,A,n,17),ne(t,A,r,17))},d:()=>Date.now(),s:()=>2147483648,c:()=>performance.now(),o:e=>{var t=A.length;if(e>>>=0,2147483648<e)return!1;for(var r=1;4>=r;r*=2){var n=t*(1+.2/r);n=Math.min(n,e+100663296);e:{n=(Math.min(2147483648,65536*Math.ceil(Math.max(e,n)/65536))-C.buffer.byteLength+65535)/65536|0;try{C.grow(n),Pt();var i=1;break e}catch{}i=void 0}if(i)return!0}return!1},E:(e,t)=>{var r=0;return ir().forEach((n,i)=>{var a=t+r;for(i=L[e+4*i>>2]=a,a=0;a<n.length;++a)B[i++]=n.charCodeAt(a);B[i]=0,r+=n.length+1}),0},F:(e,t)=>{var r=ir();L[e>>2]=r.length;var n=0;return r.forEach(i=>n+=i.length+1),L[t>>2]=n,0},e:function(e){try{var t=U(e);return vt(t),0}catch(r){if(typeof N>"u"||r.name!=="ErrnoError")throw r;return r.Pa}},p:function(e,t){try{var r=U(e);return B[t]=r.tty?2:H(r.mode)?3:(r.mode&61440)===40960?7:4,Se[t+2>>1]=0,G[t+8>>3]=BigInt(0),G[t+16>>3]=BigInt(0),0}catch(n){if(typeof N>"u"||n.name!=="ErrnoError")throw n;return n.Pa}},w:function(e,t,r,n){try{e:{var i=U(e);e=t;for(var a,u=t=0;u<r;u++){var v=L[e>>2],S=L[e+4>>2];e+=8;var E=tr(i,B,v,S,a);if(0>E){var T=-1;break e}if(t+=E,E<S)break;typeof a<"u"&&(a+=E)}T=t}return L[n>>2]=T,0}catch(z){if(typeof N>"u"||z.name!=="ErrnoError")throw z;return z.Pa}},D:function(e,t,r,n){t=-9007199254740992>t||9007199254740992<t?NaN:Number(t);try{if(isNaN(t))return 61;var i=U(e);return er(i,t,r),G[n>>3]=BigInt(i.position),i.ob&&t===0&&r===0&&(i.ob=null),0}catch(a){if(typeof N>"u"||a.name!=="ErrnoError")throw a;return a.Pa}},I:function(e){try{var t=U(e);return t.Ma?.fsync?t.Ma.fsync(t):0}catch(r){if(typeof N>"u"||r.name!=="ErrnoError")throw r;return r.Pa}},t:function(e,t,r,n){try{e:{var i=U(e);e=t;for(var a,u=t=0;u<r;u++){var v=L[e>>2],S=L[e+4>>2];e+=8;var E=rr(i,B,v,S,a);if(0>E){var T=-1;break e}if(t+=E,E<S)break;typeof a<"u"&&(a+=E)}T=t}return L[n>>2]=T,0}catch(z){if(typeof N>"u"||z.name!=="ErrnoError")throw z;return z.Pa}},k:nr},b;(async function(){function e(r){return b=r.exports,C=b.M,Pt(),ie=b.O,fe--,s.monitorRunDependencies?.(fe),fe==0&&qe&&(r=qe,qe=null,r()),b}fe++,s.monitorRunDependencies?.(fe);var t={a:Vr};return s.instantiateWasm?new Promise(r=>{s.instantiateWasm(t,(n,i)=>{e(n,i),r(n.exports)})}):(it??=s.locateFile?s.locateFile("sql-wasm.wasm",I):I+"sql-wasm.wasm",e((await qr(t)).instance))})(),s._sqlite3_free=e=>(s._sqlite3_free=b.P)(e),s._sqlite3_value_text=e=>(s._sqlite3_value_text=b.Q)(e),s._sqlite3_prepare_v2=(e,t,r,n,i)=>(s._sqlite3_prepare_v2=b.R)(e,t,r,n,i),s._sqlite3_step=e=>(s._sqlite3_step=b.S)(e),s._sqlite3_reset=e=>(s._sqlite3_reset=b.T)(e),s._sqlite3_exec=(e,t,r,n,i)=>(s._sqlite3_exec=b.U)(e,t,r,n,i),s._sqlite3_finalize=e=>(s._sqlite3_finalize=b.V)(e),s._sqlite3_column_name=(e,t)=>(s._sqlite3_column_name=b.W)(e,t),s._sqlite3_column_text=(e,t)=>(s._sqlite3_column_text=b.X)(e,t),s._sqlite3_column_type=(e,t)=>(s._sqlite3_column_type=b.Y)(e,t),s._sqlite3_errmsg=e=>(s._sqlite3_errmsg=b.Z)(e),s._sqlite3_clear_bindings=e=>(s._sqlite3_clear_bindings=b._)(e),s._sqlite3_value_blob=e=>(s._sqlite3_value_blob=b.$)(e),s._sqlite3_value_bytes=e=>(s._sqlite3_value_bytes=b.aa)(e),s._sqlite3_value_double=e=>(s._sqlite3_value_double=b.ba)(e),s._sqlite3_value_int=e=>(s._sqlite3_value_int=b.ca)(e),s._sqlite3_value_type=e=>(s._sqlite3_value_type=b.da)(e),s._sqlite3_result_blob=(e,t,r,n)=>(s._sqlite3_result_blob=b.ea)(e,t,r,n),s._sqlite3_result_double=(e,t)=>(s._sqlite3_result_double=b.fa)(e,t),s._sqlite3_result_error=(e,t,r)=>(s._sqlite3_result_error=b.ga)(e,t,r),s._sqlite3_result_int=(e,t)=>(s._sqlite3_result_int=b.ha)(e,t),s._sqlite3_result_int64=(e,t)=>(s._sqlite3_result_int64=b.ia)(e,t),s._sqlite3_result_null=e=>(s._sqlite3_result_null=b.ja)(e),s._sqlite3_result_text=(e,t,r,n)=>(s._sqlite3_result_text=b.ka)(e,t,r,n),s._sqlite3_aggregate_context=(e,t)=>(s._sqlite3_aggregate_context=b.la)(e,t),s._sqlite3_column_count=e=>(s._sqlite3_column_count=b.ma)(e),s._sqlite3_data_count=e=>(s._sqlite3_data_count=b.na)(e),s._sqlite3_column_blob=(e,t)=>(s._sqlite3_column_blob=b.oa)(e,t),s._sqlite3_column_bytes=(e,t)=>(s._sqlite3_column_bytes=b.pa)(e,t),s._sqlite3_column_double=(e,t)=>(s._sqlite3_column_double=b.qa)(e,t),s._sqlite3_bind_blob=(e,t,r,n,i)=>(s._sqlite3_bind_blob=b.ra)(e,t,r,n,i),s._sqlite3_bind_double=(e,t,r)=>(s._sqlite3_bind_double=b.sa)(e,t,r),s._sqlite3_bind_int=(e,t,r)=>(s._sqlite3_bind_int=b.ta)(e,t,r),s._sqlite3_bind_text=(e,t,r,n,i)=>(s._sqlite3_bind_text=b.ua)(e,t,r,n,i),s._sqlite3_bind_parameter_index=(e,t)=>(s._sqlite3_bind_parameter_index=b.va)(e,t),s._sqlite3_sql=e=>(s._sqlite3_sql=b.wa)(e),s._sqlite3_normalized_sql=e=>(s._sqlite3_normalized_sql=b.xa)(e),s._sqlite3_changes=e=>(s._sqlite3_changes=b.ya)(e),s._sqlite3_close_v2=e=>(s._sqlite3_close_v2=b.za)(e),s._sqlite3_create_function_v2=(e,t,r,n,i,a,u,v,S)=>(s._sqlite3_create_function_v2=b.Aa)(e,t,r,n,i,a,u,v,S),s._sqlite3_update_hook=(e,t,r)=>(s._sqlite3_update_hook=b.Ba)(e,t,r),s._sqlite3_open=(e,t)=>(s._sqlite3_open=b.Ca)(e,t);var Et=s._malloc=e=>(Et=s._malloc=b.Da)(e),Ue=s._free=e=>(Ue=s._free=b.Ea)(e);s._RegisterExtensionFunctions=e=>(s._RegisterExtensionFunctions=b.Fa)(e);var sr=(e,t)=>(sr=b.Ga)(e,t),or=(e,t)=>(or=b.Ha)(e,t),Re=e=>(Re=b.Ia)(e),he=e=>(he=b.Ja)(e),je=()=>(je=b.Ka)();s.stackSave=()=>je(),s.stackRestore=e=>Re(e),s.stackAlloc=e=>he(e),s.cwrap=(e,t,r,n)=>{var i=!r||r.every(a=>a==="number"||a==="boolean");return t!=="string"&&i&&!n?s["_"+e]:(...a)=>Jr(e,t,r,a)},s.addFunction=Ne,s.removeFunction=le,s.UTF8ToString=at,s.ALLOC_NORMAL=Je,s.allocate=Ve,s.allocateUTF8OnStack=_t;function St(){function e(){if(s.calledRun=!0,!Z){if(!s.noFSInit&&!Ct){var t,r;Ct=!0,n??=s.stdin,t??=s.stdout,r??=s.stderr,n?ue("stdin",n):bt("/dev/tty","/dev/stdin"),t?ue("stdout",null,t):bt("/dev/tty","/dev/stdout"),r?ue("stderr",null,r):bt("/dev/tty1","/dev/stderr"),ye("/dev/stdin",0),ye("/dev/stdout",1),ye("/dev/stderr",1)}if(b.N(),Jt=!1,s.onRuntimeInitialized?.(),s.postRun)for(typeof s.postRun=="function"&&(s.postRun=[s.postRun]);s.postRun.length;){var n=s.postRun.shift();Nt.unshift(n)}xt(Nt)}}if(0<fe)qe=St;else{if(s.preRun)for(typeof s.preRun=="function"&&(s.preRun=[s.preRun]);s.preRun.length;)Ar();xt(Rt),0<fe?qe=St:s.setStatus?(s.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>s.setStatus(""),1),e()},1)):e()}}if(s.preInit)for(typeof s.preInit=="function"&&(s.preInit=[s.preInit]);0<s.preInit.length;)s.preInit.pop()();return St(),d}),We)};typeof Ge=="object"&&typeof be=="object"?(be.exports=Ke,be.exports.default=Ke):typeof define=="function"&&define.amd?define([],function(){return Ke}):typeof Ge=="object"&&(Ge.Module=Ke)});var xn={};Sn(xn,{default:()=>et});module.exports=An(xn);var tt=require("obsidian");var te=require("obsidian"),vr={sourceMode:"sqlite",sqlitePath:"",markdownRoot:"/Bibeln",calloutType:"[!bible]+",showVerseNumbers:!0,lineBreakPerVerse:!1,debug:!1},Qe=class extends te.PluginSettingTab{constructor(h,c){super(h,c),this.plugin=c}display(){let{containerEl:h}=this;h.empty(),h.createEl("h2",{text:"Bible Text Inserter \u2013 Settings"}),new te.Setting(h).setName("Primary Source").setDesc("Choose where to fetch Bible text from.").addDropdown(c=>c.addOption("sqlite","SQLite (Bibel2000.db)").addOption("markdown","Markdown files").setValue(this.plugin.settings.sourceMode).onChange(async d=>{this.plugin.settings.sourceMode=d,await this.plugin.saveSettings(),this.display()})),new te.Setting(h).setName("SQLite path").setDesc("Absolute or vault-relative path to Bibel2000.db").addText(c=>c.setPlaceholder("e.g. assets/Bibel2000.db").setValue(this.plugin.settings.sqlitePath).onChange(async d=>{this.plugin.settings.sqlitePath=d,await this.plugin.saveSettings()})),new te.Setting(h).setName("Markdown root").setDesc("Root folder of your Bible Markdown (default /Bibeln)").addText(c=>c.setPlaceholder("/Bibeln").setValue(this.plugin.settings.markdownRoot).onChange(async d=>{this.plugin.settings.markdownRoot=d||"/Bibeln",await this.plugin.saveSettings()})),new te.Setting(h).setName("Callout type").setDesc("Callout marker used when inserting text, e.g. [!bible]+").addText(c=>c.setPlaceholder("[!bible]+").setValue(this.plugin.settings.calloutType).onChange(async d=>{this.plugin.settings.calloutType=d||"[!bible]+",await this.plugin.saveSettings()})),new te.Setting(h).setName("Show verse numbers").setDesc("Include ^1, ^2, \u2026 before each verse.").addToggle(c=>c.setValue(this.plugin.settings.showVerseNumbers).onChange(async d=>{this.plugin.settings.showVerseNumbers=d,await this.plugin.saveSettings()})),new te.Setting(h).setName("Line break per verse").setDesc("If ON, each verse is on a separate line; otherwise concatenated into a single paragraph.").addToggle(c=>c.setValue(this.plugin.settings.lineBreakPerVerse).onChange(async d=>{this.plugin.settings.lineBreakPerVerse=d,await this.plugin.saveSettings()})),new te.Setting(h).setName("Debug logging").setDesc("If ON, logs parser and data events to the console.").addToggle(c=>c.setValue(this.plugin.settings.debug).onChange(async d=>{this.plugin.settings.debug=d,await this.plugin.saveSettings()}))}};function m(k,h,c,d,y){return{enFull:k,enAbbr:h,svFull:c,svAbbr:d,aliases:y.map(s=>Mt(s))}}function Mt(k){return k.toLowerCase().replace(/\./g,"").replace(/\s+/g," ").trim()}var At=[m("Genesis","Gen","F\xF6rsta Moseboken","1 Mos",["gen","genesis","f\xF6rsta moseboken","1 mos","1mos","1 moseboken"]),m("Exodus","Exod","Andra Moseboken","2 Mos",["exod","exodus","andra moseboken","2 mos","2mos","2 moseboken"]),m("Leviticus","Lev","Tredje Moseboken","3 Mos",["lev","leviticus","tredje moseboken","3 mos","3mos","3 moseboken"]),m("Numbers","Num","Fj\xE4rde Moseboken","4 Mos",["num","numbers","fj\xE4rde moseboken","4 mos","4mos","4 moseboken"]),m("Deuteronomy","Deut","Femte Moseboken","5 Mos",["deut","deuteronomy","femte moseboken","5 mos","5mos","5 moseboken"]),m("Joshua","Josh","Josua","Jos",["josh","joshua","jos","josua"]),m("Judges","Judg","Domarboken","Dom",["judg","judges","dom","domarboken"]),m("Ruth","Ruth","Rut","Rut",["ruth","rut"]),m("1 Samuel","1Sam","F\xF6rsta Samuelsboken","1 Sam",["1 sam","1sam","f\xF6rsta samuelsboken","1 samuelsboken","first samuel","1 samuel"]),m("2 Samuel","2Sam","Andra Samuelsboken","2 Sam",["2 sam","2sam","andra samuelsboken","2 samuelsboken","second samuel","2 samuel"]),m("1 Kings","1Kgs","F\xF6rsta Kungaboken","1 Kung",["1 kgs","1kgs","f\xF6rsta kungaboken","1 kungaboken","first kings","1 kings","1 kung"]),m("2 Kings","2Kgs","Andra Kungaboken","2 Kung",["2 kgs","2kgs","andra kungaboken","2 kungaboken","second kings","2 kings","2 kung"]),m("1 Chronicles","1Chr","F\xF6rsta Kr\xF6nikeboken","1 Kr\xF6n",["1 chr","1chr","f\xF6rsta kr\xF6nikeboken","1 kr\xF6nikeboken","first chronicles","1 chronicles","1 kr\xF6n"]),m("2 Chronicles","2Chr","Andra Kr\xF6nikeboken","2 Kr\xF6n",["2 chr","2chr","andra kr\xF6nikeboken","2 kr\xF6nikeboken","second chronicles","2 chronicles","2 kr\xF6n"]),m("Ezra","Ezra","Esra","Esra",["ezra","esra"]),m("Nehemiah","Neh","Nehemja","Neh",["nehemiah","nehemja","neh"]),m("Esther","Esth","Ester","Est",["esther","esth","ester","est"]),m("Job","Job","Job","Job",["job"]),m("Psalms","Ps","Psaltaren","Ps",["ps","psalms","psalm","psaltaren"]),m("Proverbs","Prov","Ordspr\xE5ksboken","Ords",["prov","proverbs","ords","ordspr\xE5ksboken"]),m("Ecclesiastes","Eccl","Predikaren","Pred",["eccl","ecclesiastes","pred","predikaren"]),m("Song of Songs","Song","H\xF6ga Visan","HV",["song","song of songs","song of solomon","h\xF6ga visan","hv"]),m("Isaiah","Isa","Jesaja","Jes",["isa","isaiah","jes","jesaja"]),m("Jeremiah","Jer","Jeremia","Jer",["jer","jeremiah","jeremia"]),m("Lamentations","Lam","Klagovisorna","Klag",["lam","lamentations","klag","klagovisorna"]),m("Ezekiel","Ezek","Hesekiel","Hes",["ezek","ezekiel","hes","hesekiel"]),m("Daniel","Dan","Daniel","Dan",["dan","daniel"]),m("Hosea","Hos","Hosea","Hos",["hos","hosea"]),m("Joel","Joel","Joel","Joel",["joel"]),m("Amos","Amos","Amos","Am",["amos","am"]),m("Obadiah","Obad","Obadja","Ob",["obad","obadiah","obadja","ob"]),m("Jonah","Jonah","Jona","Jona",["jonah","jona"]),m("Micah","Mic","Mika","Mik",["mic","micah","mika","mik"]),m("Nahum","Nah","Nahum","Nah",["nah","nahum"]),m("Habakkuk","Hab","Habackuk","Hab",["hab","habakkuk","habackuk"]),m("Zephaniah","Zeph","Sefanja","Sef",["zeph","zephaniah","sef","sefanja"]),m("Haggai","Hag","Haggaj","Hag",["hag","haggai","haggaj"]),m("Zechariah","Zech","Sakarja","Sak",["zech","zechariah","sakarja","sak"]),m("Malachi","Mal","Malaki","Mal",["mal","malachi","malaki"]),m("Matthew","Matt","Matteusevangeliet","Matt",["matt","matthew","matteus","matteusevangeliet"]),m("Mark","Mark","Markusevangeliet","Mark",["mark","markus","markusevangeliet"]),m("Luke","Luke","Lukasevangeliet","Luk",["luke","luk","lukas","lukasevangeliet"]),m("John","John","Johannesevangeliet","Joh",["john","joh","johannes","johannesevangeliet"]),m("Acts","Acts","Apostlag\xE4rningarna","Apg",["acts","apostlag\xE4rningarna","apg"]),m("Romans","Rom","Romarbrevet","Rom",["rom","romans","romarbrevet"]),m("1 Corinthians","1Cor","F\xF6rsta Korinthierbrevet","1 Kor",["1cor","1 cor","f\xF6rsta korinthierbrevet","1 kor","1kor","first corinthians","1 corinthians"]),m("2 Corinthians","2Cor","Andra Korinthierbrevet","2 Kor",["2cor","2 cor","andra korinthierbrevet","2 kor","2kor","second corinthians","2 corinthians"]),m("Galatians","Gal","Galaterbrevet","Gal",["gal","galatians","galaterbrevet"]),m("Ephesians","Eph","Efesierbrevet","Ef",["eph","ephesians","ef","efesierbrevet"]),m("Philippians","Phil","Filipperbrevet","Fil",["phil","philippians","fil","filipperbrevet"]),m("Colossians","Col","Kolosserbrevet","Kol",["col","colossians","kol","kolosserbrevet"]),m("1 Thessalonians","1Thess","F\xF6rsta Thessalonikerbrevet","1 Thess",["1thess","1 thess","f\xF6rsta thessalonikerbrevet","1 thessalonikerbrevet","first thessalonians","1 thessalonians","1thes","1 thes"]),m("2 Thessalonians","2Thess","Andra Thessalonikerbrevet","2 Thess",["2thess","2 thess","andra thessalonikerbrevet","2 thessalonikerbrevet","second thessalonians","2 thessalonians","2thes","2 thes"]),m("1 Timothy","1Tim","F\xF6rsta Timotheosbrevet","1 Tim",["1tim","1 tim","f\xF6rsta timotheosbrevet","1 timotheosbrevet","first timothy","1 timothy"]),m("2 Timothy","2Tim","Andra Timotheosbrevet","2 Tim",["2tim","2 tim","andra timotheosbrevet","2 timotheosbrevet","second timothy","2 timothy"]),m("Titus","Titus","Titusbrevet","Tit",["titus","tit","titusbrevet"]),m("Philemon","Phlm","Filemonbrevet","Film",["phlm","philemon","filemonbrevet","filemon","film"]),m("Hebrews","Heb","Hebreerbrevet","Heb",["heb","hebrews","hebreerbrevet"]),m("James","Jas","Jakobsbrevet","Jak",["jas","james","jak","jakobsbrevet"]),m("1 Peter","1Pet","F\xF6rsta Petrusbrevet","1 Pet",["1pet","1 pet","f\xF6rsta petrusbrevet","1 petrusbrevet","first peter","1 peter"]),m("2 Peter","2Pet","Andra Petrusbrevet","2 Pet",["2pet","2 pet","andra petrusbrevet","2 petrusbrevet","second peter","2 peter"]),m("1 John","1John","F\xF6rsta Johannesbrevet","1 Joh",["1john","1 john","f\xF6rsta johannesbrevet","1 joh","1joh","first john"]),m("2 John","2John","Andra Johannesbrevet","2 Joh",["2john","2 john","andra johannesbrevet","2 joh","2joh","second john"]),m("3 John","3John","Tredje Johannesbrevet","3 Joh",["3john","3 john","tredje johannesbrevet","3 joh","3joh","third john"]),m("Jude","Jude","Judasbrevet","Jud",["jude","jud","judasbrevet"]),m("Revelation","Rev","Uppenbarelseboken","Upp",["rev","revelation","uppenbarelseboken","upp"])];function Mn(k){let h=Mt(k).replace(/\s*(?=\d)/g,""),c=At.find(y=>y.aliases.includes(h));if(c)return c;let d=h.replace(/^([123])\s?/,"$1 ");return c=At.find(y=>y.aliases.includes(d)),c||(c=At.find(y=>[y.enFull,y.enAbbr,y.svFull,y.svAbbr].map(Mt).includes(h)),c||null)}function wr(k){return k.split(";").map(h=>h.trim()).filter(Boolean)}var Pn=/[-]/;function gr(k){let h=k.trim();if(!h)return null;let c=h.match(/^(.+?)\s+(\d+)(?::(.+))?$/);if(!c)return null;let d=c[1].trim(),y=c[2].trim(),s=(c[3]??"").trim(),M=Mn(d);if(!M)return null;let q=parseInt(y,10);if(!Number.isInteger(q))return null;let $=s?s.split(",").map(F=>F.trim()).filter(Boolean):[],j=[];if($.length===0)j.push({chapter:q,raw:`${q}`});else for(let F of $){let J=F.replace(/^v(?:\.)?\s*/i,"").split(Pn);if(J.length===1){let V=parseInt(J[0],10);if(!Number.isInteger(V))return null;j.push({chapter:q,v1:V,v2:V,raw:`${q}:${F}`})}else if(J.length===2){let V=parseInt(J[0],10),se=parseInt(J[1],10);if(!Number.isInteger(V)||!Number.isInteger(se)||se<V)return null;j.push({chapter:q,v1:V,v2:se,raw:`${q}:${F}`})}else return null}return{bookKey:M.enFull,bookLabel:h,svFull:M.svFull,svAbbr:M.svAbbr,enFull:M.enFull,enAbbr:M.enAbbr,spans:j}}function kr(k){let h=new Set,c=[],d=[];for(let M of k){if(M.v1==null||M.v2==null)return[{chapter:k[0].chapter}];for(let q=M.v1;q<=M.v2;q++)h.has(q)||(h.add(q),d.push({v:q}))}if(d.sort((M,q)=>M.v-q.v),d.length===0)return[];let y=d[0].v,s=d[0].v;for(let M=1;M<=d.length;M++){let q=d[M]?.v;q!==s+1&&(c.push({chapter:k[0].chapter,v1:y,v2:s}),q!=null&&(y=q)),s=q??s}return c}var Xe=class{constructor(h){this.sqlitePath=h;this.SQL=null;this.db=null}async ensureInit(){if(this.SQL&&this.db)return;let h=this._plugin;if(!h)throw new Error("Internal: plugin ref missing on SqliteSource.");let c=h.app.vault.adapter.getResourcePath(h.manifest.dir+"/sql-wasm.wasm"),d=(await Promise.resolve().then(()=>qn(yr()))).default;if(this.SQL=await d({locateFile:()=>c}),!this.sqlitePath)throw new Error("SQLite path saknas. Ange s\xF6kv\xE4g till Bibel2000.db i Settings.");let y=await h.app.vault.adapter.readBinary(this.sqlitePath),s=new Uint8Array(y);this.db=new this.SQL.Database(s)}async getVerses(h){await this.ensureInit();let c=[],d=h.spans[0].chapter,s=this.db.prepare("SELECT verse, content FROM verse WHERE book = ? AND chapter = ? ORDER BY verse ASC");s.bind([h.enFull,d]);let M=[];for(;s.step();){let[j,D]=s.get();M.push({verse:j,text:String(D)})}if(s.free(),!h.spans.some(j=>j.v1!=null))return M;let $=kr(h.spans);for(let j of $)for(let D=j.v1;D<=j.v2;D++){let F=M.find(I=>I.verse===D);F&&c.push(F)}return c}chapterLinkTarget(h){let c=h.spans[0].chapter;return`${h.svFull} ${c}`}},Ye=class{constructor(h){this.root=h}async getVerses(h){let c=h.spans[0].chapter,y=`${this.root.replace(/^\/+/,"").replace(/\/+$/,"")}/${h.svFull}/${h.svFull} ${c}.md`,s=window.app.vault.adapter;if(!await s.exists(y))throw new Error(`Markdown-kapitel hittas ej: ${y}`);let q=(await s.read(y)).split(/\r?\n/),$=new Map,j=null,D=[],F=`${_r(h.svFull)}|${_r(h.svAbbr)}`,I=new RegExp(`^#{1,6}\\s+(?:${F})\\s+${c}:(\\d+)\\b(.*)$`,"i"),J=()=>{if(j!=null){let O=D.join(`
`).trim();$.set(j,O)}D=[]};for(let O of q){let C=O.match(I);if(C){J(),j=parseInt(C[1],10);let Z=(C[2]||"").trim();Z&&D.push(Z)}else j!=null&&D.push(O)}J();let V=[...$.entries()].sort((O,C)=>O[0]-C[0]).map(([O,C])=>({verse:O,text:C}));if(!h.spans.some(O=>O.v1!=null))return V;let ke=[],oe=kr(h.spans);for(let O of oe)for(let C=O.v1;C<=O.v2;C++){let Z=V.find(Ee=>Ee.verse===C);Z&&ke.push(Z)}return ke}chapterLinkTarget(h){let c=h.spans[0].chapter;return`${h.svFull} ${c}`}};function _r(k){return k.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var _e=require("obsidian"),Ze=class extends _e.Modal{constructor(c,d){super(c);this.value="";this.onSubmit=d}onOpen(){let{contentEl:c}=this;c.createEl("h3",{text:"Insert Bible text"});let d=c.createEl("textarea",{cls:"bti-input"});d.rows=6,d.placeholder="Ex: 1 Mos 1:1-4; Joh 1:1-3,14",d.value=this.value,d.oninput=()=>this.value=d.value,new _e.Setting(c).addButton(y=>y.setButtonText("Insert").setCta().onClick(()=>{if(!this.value.trim()){new _e.Notice("Please enter one or more references.");return}this.onSubmit(this.value.trim()),this.close()})).addButton(y=>y.setButtonText("Cancel").onClick(()=>this.close()))}onClose(){this.contentEl.empty()}};var et=class extends tt.Plugin{async onload(){this.settings=Object.assign({},vr,await this.loadData()),this.addSettingTab(new Qe(this.app,this)),this.dataSource=this.makeDataSource(),this.addCommand({id:"insert-bible-text-modal",name:"Insert Bible text (modal)",editorCallback:h=>this.openModal(h)}),this.addCommand({id:"insert-bible-text-from-selection",name:"Insert Bible text from selection",editorCallback:h=>this.fromSelection(h)}),this.settings.debug&&console.log("[BibleInserter] Loaded",this.settings)}onunload(){this.settings.debug&&console.log("[BibleInserter] Unloaded")}async saveSettings(){await this.saveData(this.settings),this.dataSource=this.makeDataSource(),this.settings.debug&&console.log("[BibleInserter] Settings saved",this.settings)}makeDataSource(){if(this.settings.sourceMode==="sqlite"){let h=new Xe(this.settings.sqlitePath);return h._plugin=this,h}return new Ye(this.settings.markdownRoot)}openModal(h){new Ze(this.app,async d=>{await this.insertForInput(h,d)}).open()}async fromSelection(h){let c=h.getSelection().trim();if(!c){new tt.Notice("No selection. Open the modal or select references.");return}await this.insertForInput(h,c)}async insertForInput(h,c){this.settings.debug&&console.log("[BibleInserter] Input:",c);let d=wr(c),y=[];for(let M of d){let q=gr(M);if(!q){y.push(["> [!error]- Ogiltig referens",`> ${M}`,'> Kontrollera boknamn/f\xF6rkortning och format (ex: "1 Mos 1:1-4", "Joh 1:1\u20133,14").'].join(`
`));continue}this.settings.debug&&console.log("[BibleInserter] Parsed:",q);let $=[],j="";try{if($=await this.dataSource.getVerses(q),j=this.dataSource.chapterLinkTarget(q),!$?.length){y.push(["> [!warning]- Inga verser hittades",`> ${M}`,"> Kapitlet finns men versintervallet verkar tomt."].join(`
`));continue}}catch(I){let J=String(I?.message??I);y.push(["> [!error]- Kunde inte h\xE4mta bibeltext",`> ${M}`,`> ${J.includes("not found")?"S\xF6kv\xE4g saknas eller filen hittas inte.":J}`].join(`
`));continue}let D=this.makeHeading(q,j),F=this.formatVerses($).split(`
`).map(I=>`> ${I}`).join(`
`);y.push(`> ${this.settings.calloutType} ${D}
${F}
`)}let s=y.join(`
`);h.replaceSelection(s),this.settings.debug&&console.log("[BibleInserter] Inserted:",s)}makeHeading(h,c){let d=`${h.bookLabel} (Bibel 2000)`;return`[[${c}|${d}]]`}formatVerses(h){let c=this.settings.showVerseNumbers;return this.settings.lineBreakPerVerse?h.map(s=>(c?`^${s.verse} ${s.text}`:s.text).trim()).join(`
`):h.map(s=>(c?`^${s.verse} ${s.text}`:s.text).trim()).join(" ").replace(/\s+/g," ").trim()}};
